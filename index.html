<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>pdg2</title>
    <script>
      if (typeof utools === 'undefined') {
        window.utools = {
          db: {
            get: (k) => JSON.parse(localStorage.getItem(k)),
            put: (d) => { localStorage.setItem(d._id, JSON.stringify(d)); return {ok: true} },
            allDocs: (p) => Object.keys(localStorage)
                              .filter(k => k.startsWith(p))
                              .map(k => JSON.parse(localStorage.getItem(k))),
            remove: (k) => localStorage.removeItem(k)
          },
          copyText: (t) => {
            navigator.clipboard.writeText(t);
            console.log('Copied:', t);
          },
          showNotification: (t) => console.log('Notification:', t)
        };
        window.utoolsDb = {
          get: (k) => window.utools.db.get(k),
          put: (d) => window.utools.db.put(d),
          allDocs: (p) => window.utools.db.allDocs(p),
          remove: (k) => window.utools.db.remove(k)
        };
        window.utoolsUtils = {
          copyText: (t) => window.utools.copyText(t),
          showNotification: (t) => window.utools.showNotification(t)
        };
      }
    </script>
  </head>
  <body>
    <div id="app"></div>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
